<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>promises part 3</title>
  </head>
  <body>

    <script>
      /*Write a Promise function called squareNumber that takes a number as input and returns a Promise that resolves with the square of that number after a delay of 1 second.*/

      const squareNumber = () => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            const writeANum = prompt("write a number");
            resolve(writeANum);
          }, 1000);
        });
      };

      squareNumber()
        .then((num) => {
          console.log(`The number is ${num}`);

          return new Promise((resolve, reject) => {
            const squareTheNum = num * num;
            resolve(squareTheNum);
          });
        })
        .then((squareNum) => {
          console.log(`The square of this number is ${squareNum}`);
        });

      /****************************************************************/

      /*Random Quote Generator: Create a simple web page that displays a random quote each time it is refreshed. Fetch a list of quotes from an API using promises and update the page with a new quote when the user clicks a button.*/

      let quotes = [
        "The greatest glory in living lies not in never falling, but in rising every time we fall. - Nelson Mandela",

        "The way to get started is to quit talking and begin doing. - Walt Disney",

        "If you set your goals ridiculously high and it's a failure, you will fail above everyone else's success. - James Cameron",

        "Life is what happens when you're busy making other plans. - John Lennon",

        "The only limit to our realization of tomorrow will be our doubts of today. - Franklin D. Roosevelt",
      ];

      function randomQuoteGenerator(quotes) {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            const randomQuote = Math.floor(Math.random() * quotes.length);
            const randomQuoteIndex = quotes[randomQuote];
            if (randomQuoteIndex) {
              resolve(randomQuoteIndex);
            } else {
              reject("failed to fetch the quote");
            }
          }, 1000);
        });
      }

      randomQuoteGenerator(quotes)
        .then((quote) => {
          console.log(quote);
        })
        .catch((error) => {
          console.log(`Error${error}`);
        });

      const randomUserData = () => {
        return new Promise((resolve, reject) => {
          let userData = [
            { name: "Alice", age: 28 },
            { name: "Bob", age: 32 },
            { name: "Charlie", age: 25 },
          ];

          const randomData = Math.floor(Math.random() * userData.length);
          const randomDataOfUser = userData[randomData];
          if (randomDataOfUser) {
            resolve(randomDataOfUser);
          } else {
            reject("no user data found");
          }
        });
      };

      randomUserData()
        .then((data) => {
          console.log(data);
        })
        .catch((error) => {
          console.error(error);
        });

      /****************************************************************/

       function getData(){
        // with promise method
        fetch("https://fakestoreapi.com/products")
        .then((raw)=>{
            return raw.json();
        })
        .then((data)=>{
            console.log(data);
        })

        // with async method(add async word before start the function)

        // const response = await fetch("https://fakestoreapi.com/products");

        // const data = await response.json();
        // console.log(data);
      }

      getData();


     
    </script>
  </body>
</html>
